# Windows Local Setup — Exact Steps
## Capstone Multi-Agent Project (Claude AI + Docker + GitHub)

---

## STEP 1 — Verify Prerequisites in PowerShell

Open **PowerShell as Administrator** and run each check:

```powershell
python --version      # Need 3.10+
git --version         # Need any recent version
docker --version      # Need 20+
```

### Missing something? Install it:

```powershell
# If Python missing:
winget install Python.Python.3.12

# If Git missing:
winget install Git.Git

# If Docker missing:
winget install Docker.DockerDesktop
# Then: Start Docker Desktop from Start Menu and wait for it to fully load
# Settings → General → ✅ "Use WSL 2 based engine" → Apply & Restart
```

---

## STEP 2 — Open the Project in PowerShell

```powershell
cd C:\Capstone-Project
```

---

## STEP 3 — Create Python Virtual Environment

```powershell
# Create venv
python -m venv .venv

# Activate it
.venv\Scripts\activate

# You should see (.venv) in your prompt now
# Install packages
pip install anthropic python-dotenv
```

> Every time you open a new terminal, run `.venv\Scripts\activate` first.

---

## STEP 4 — Connect to Your Existing GitHub Repo

```powershell
# Inside C:\Capstone-Project

# Initialize git (if not already done)
git init

# Connect to YOUR existing repo (replace with your actual URL)
git remote add origin https://github.com/YOUR_USERNAME/YOUR_REPO_NAME.git

# Verify the remote is set
git remote -v
```

### Set up credentials so push works without password prompts:

```powershell
# Store credentials permanently
git config --global credential.helper manager

# Set your identity
git config --global user.name "Your Name"
git config --global user.email "your@email.com"
```

### Generate a GitHub Personal Access Token (PAT):

1. Go to: **https://github.com/settings/tokens**
2. Click **"Generate new token (classic)"**
3. Note: `capstone-push`
4. Expiration: **90 days**
5. Scope: ✅ **repo** (check the top-level repo checkbox)
6. Click **Generate token** → **Copy it immediately**

### Do one manual push to cache your token:

```powershell
# Create .gitignore first
@"
.env
__pycache__/
*.pyc
.venv/
*.log
"@ | Out-File -Encoding utf8 .gitignore

# Stage and push
git add .gitignore
git commit -m "Initial project setup"
git push -u origin main
# When prompted:
#   Username: your GitHub username
#   Password: paste your PERSONAL ACCESS TOKEN (not your GitHub password!)
# Git will cache it — you won't be asked again.
```

---

## STEP 5 — Edit the .env File

Open `.env` in Notepad (or VS Code) and fill in your values:

```powershell
# Open in Notepad
notepad .env

# Or open in VS Code
code .env
```

Set these values:

```env
# ── Local Claude AI ──────────────────────────────────────
ANTHROPIC_API_KEY=sk-ant-YOUR_ACTUAL_KEY_HERE
CLAUDE_MODEL=claude-sonnet-4-20250514

# ── Your GitHub repo ─────────────────────────────────────
GITHUB_REPO_URL=https://github.com/YOUR_USERNAME/YOUR_REPO_NAME.git
GITHUB_BRANCH=main

# ── Azure (leave as placeholder — not needed for local) ──
AZURE_OPENAI_CHAT_DEPLOYMENT_NAME=gpt-4o
AZURE_OPENAI_ENDPOINT=Replace with your endpoint URL
AZURE_OPENAI_API_KEY=Replace with your API key
AZURE_OPENAI_API_VERSION=2024-11-20
```

Save and close.

---

## STEP 6 — Run the Multi-Agent System

```powershell
# Make sure venv is active (you see (.venv) in prompt)
.venv\Scripts\activate

# Run the local Claude version
python src\multi_agent_local.py
```

When prompted, type your request:
```
Enter your app request: Build a calculator app with basic arithmetic operations
```

Watch the agents collaborate:
- **BusinessAnalyst** → writes requirements
- **SoftwareEngineer** → writes HTML/JS code in a ```html block
- **ProductOwner** → reviews and says `READY FOR USER APPROVAL`

Then type:
```
APPROVED
```

This will automatically:
1. Extract the HTML from the chat
2. Save it as `index.html`
3. Run `push_to_github.sh` → push to your GitHub repo

---

## STEP 7 — Preview App in Docker

```powershell
# Build the Docker image (uses index.html generated by agents)
docker build -t capstone-app .

# Run it on port 8080
docker run -d -p 8080:80 --name capstone-app capstone-app

# Open in browser
start http://localhost:8080

# Stop when done
docker stop capstone-app
docker rm capstone-app
```

### Or use Docker Compose (easier):

```powershell
# Start (hot-reloads index.html changes automatically)
docker compose up -d

# Open browser
start http://localhost:8080

# Stop
docker compose down
```

---

## Quick Troubleshooting

| Problem | Fix |
|---|---|
| `(.venv)` not showing | Run `.venv\Scripts\activate` |
| `ModuleNotFoundError: anthropic` | Activate venv first, then `pip install anthropic python-dotenv` |
| Git push asks for password every time | Use `git config --global credential.helper manager` |
| Git push fails with 403 | Use your PAT as password, not your GitHub account password |
| Docker Desktop not starting | Open Docker Desktop app from Start Menu, wait ~60 seconds |
| `docker: command not found` | Restart PowerShell after Docker Desktop install |
| `push_to_github.sh` fails on Windows | See note below ↓ |

### Note on push_to_github.sh on Windows

The bash script runs via Git Bash (installed with Git for Windows). If it fails, run manually:

```powershell
# Manual push alternative (pure PowerShell)
git add index.html
git commit -m "Auto-push approved app"
git push origin main
```

Or update `multi_agent_local.py` to use PowerShell instead of bash:

```python
# In push_to_github() function, change:
result = subprocess.run(["bash", script_path], ...)

# To (Windows-friendly):
result = subprocess.run(["git", "add", "index.html"], ...)
result = subprocess.run(["git", "commit", "-m", "Auto-push approved app"], ...)
result = subprocess.run(["git", "push", "origin", "main"], ...)
```

---

## Summary — Commands to Remember

```powershell
# Activate venv (always do this first)
cd C:\Capstone-Project
.venv\Scripts\activate

# Run agents
python src\multi_agent_local.py

# Build & run Docker
docker build -t capstone-app .
docker run -d -p 8080:80 --name capstone-app capstone-app
start http://localhost:8080

# Push to GitHub manually
git add index.html
git commit -m "update"
git push origin main
```
